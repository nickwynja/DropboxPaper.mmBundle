#!/usr/bin/env python

import fileinput
from subprocess import call
import syslog
from BeautifulSoup import BeautifulSoup
import sys
import email
import quopri

raw = ""

for line in sys.stdin:
	raw += str(line)

msg = email.message_from_string(raw)
for part in msg.walk():
    if part.get_content_type() == 'text/html':
        html = part.get_payload()

soup = BeautifulSoup(quopri.decodestring(html))
span = soup.find('span', {'id': 'page-title-pattern-header'})
href = span.find('a')['href']

call(['open', str(href)])